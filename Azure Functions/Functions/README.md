# Explore Azure Functions
 
 Azure Functions is a cloud service available on-demand that provides all the continually updated infrastructure and resources needed to run your applications. You focus on the pieces of code that matter most to you, and Functions handles the rest. Functions provides serverless compute for Azure. You can use Functions to build web APIs, respond to database changes, process IoT streams, manage message queues, and more.

 [Explore Azure Functions...](https://learn.microsoft.com/en-us/training/modules/explore-azure-functions/1-introduction)

## Hosting options

When you create a function app in Azure, you must choose a hosting plan for your app. There are three basic hosting plans available for Azure Functions: Consumption plan, Functions Premium plan, and App service (Dedicated) plan. All hosting plans are generally available (GA) on both Linux and Windows virtual machines.

The hosting plan you choose dictates the following behaviors:

- How your function app is scaled.
- The resources available to each function app instance.
- Support for advanced functionality, such as Azure Virtual Network connectivity.

Follow the [Explore Azure Functions](#Explore-Azure-Functions) link in order to see more detailed explanation.

## Storage account requirements
On any plan, a function app requires a general Azure Storage account, which supports Azure Blob, Queue, Files, and Table storage. This is because Functions rely on Azure Storage for operations such as managing triggers and logging function executions.

## Scale Azure Functions

In most plans, functions are dynamically scaled based on load. When demand of execution increases, more resources are allocated automatically to the service and when requests fall, resources and application instances drop off automatically. In Consumption plan, you don’t pay at all for idle functions.

Follow the [Explore Azure Functions](#Explore-Azure-Functions) link in order to see more detailed explanation.

## Triggers && Bindings

Azure Functions lets you define **triggers**, which start the execution of your code. Triggers can also process inputs for passing data into your functions. Each function can have only one trigger. Some of the trigger types supported by Azure functions include:

- Storage: you can listen from events from databases like - Azure Cosmos DB when a new row is inserted for example.
- Events: Event Grid and Event Hubs produce events that can trigger your code.
- HTTP, code can be triggered by Web requests and Web Hooks
- Queues, queue messages can be process as well.
- Timer, code can be invoked with a certain time interval.

Use **bindings** to connect to data sources. Bindings are ways to simplify coding for input and output data. While you can use client SDKs to connect to services from your function code, Functions provide bindings to simplify these connections. Essentially bindings are connection code you don’t have to write. You can integrate with many services on Azure and solve integration problems and automate business processes.

Bindings comes in two flavors, input, and output. An output binding provides a way to write data to the data source, for example, place a message on a queue or a new row in a database. Input bindings can be used to pass data to your function from a data source different than the one that triggered the function.

[Learn more about the concepts Trigger and Bindings](https://learn.microsoft.com/en-us/azure/azure-functions/functions-triggers-bindings)

## Azure Functions monitoring

Azure Functions offers built-in integration with Azure Application Insights to monitor functions. Application Insights collects log, performance, and error data. It helps you detect performance anomalies, diagnose issues and better understand how your functions are used.

Application Insights instrumentation is built into Azure Functions. With Application Insights integration, telemetry data is sent to your connected Application Insights instance. This data includes logs generated by the Functions host, traces written from your functions code, and performance data.

[More details about monitor your functions...](https://learn.microsoft.com/en-us/azure/azure-functions/functions-monitoring)

> **Note**
> In addition to data from your functions and the Functions host, you can also collect data from the Functions scale controller.

Other things to explore:

## Integration with Api Management
APIM provides security and routing for your HTTP triggered function endpoints as a way to expose them as a true REST API.

## Azure Functions Deployment slots
Azure Functions deployment slots allow your function app to run different instances called "slots". Slots are different environments exposed via a publicly available endpoint. Slots provide a way for you to test a new version of your functions in Azure in a safe environment and then seamlessly swap the new version into production.

## Manage Azure Function configuration
Connection strings, environment variables, and other application settings are defined separately for each function app. The function app settings values can be read in the code as environment variables. [More info](https://learn.microsoft.com/en-us/azure/azure-functions/functions-how-to-use-azure-function-app-settings?tabs=portal)

## When to use Azure Functions

As Azure Functions uses an event-based architecture, there are many interesting cases where such an architecture can be applied. Here’s a non-exhaustive list of scenarios suited for it:

- **Reminders and notifications**. Azure Functions has a trigger that can be instructed to run at certain intervals making it straight forward to implement such a scenario. You might have scenarios were getting a notification can be business critical.

- **Scheduled tasks**. Tasks that could use the same time-based triggers. In this case, there could be jobs that need to be done at certain intervals, for example, data cleaning or look for a piece of data.

- **Experimental APIs**. If you use the Consumption plan, with Functions, you can make millions of calls and pay very little. One thing to keep in mind is that any type of storage incurs a cost.

- **An example is writing to a database with a function**. This plan is ideal to use for prototyping or for Start-ups. In the latter case, if you have so many calls to your functions that most likely means you have paying customers. Hence, Azure Functions scales with your business. As your business grows, you might consider other hosting plans as well.

- **Irregular but important business flows**. Getting a new customer and onboarding that customer is an example where your code has a good reason to run. Such a flow likely consists of operations like interacting with a data store, sending out emails, and more.

- **Queue based**. You might have a ticket selling app and requests needs to be processed in a queue like fashion.

- **Processing data in real-time**. If combined with Azure SignalR, Azure Functions can be made to process data on demand.

- **Analyze IoT stream**. It’s possible to collect and process data from IoT devices.

- **Process file uploads**. Run code when a file is uploaded or changed in a blob storage.

- **Serverless workflow**. A series of functions can be chained together, and you can introduce state which makes it possible to devise complex long running workflows via Durable Functions. Another choice for workflows is Logic apps that can monitor external events, perform branching logic and invoke functions as a result.

## Exercises:
- [Create a function app in the Azure portal](https://learn.microsoft.com/en-us/training/modules/create-serverless-logic-with-azure-functions/3-create-an-azure-functions-app-in-the-azure-portal?source=learn&pivots=javascript) 
- [Lab 02](https://microsoftlearning.github.io/AZ-204-DevelopingSolutionsforMicrosoftAzure/Instructions/Labs/AZ-204_lab_02.html) 


## References:
- [Product](https://azure.microsoft.com/en-us/products/functions/)
- [Documentation](https://learn.microsoft.com/es-es/azure/azure-functions/)
- [MS Learn resources](https://learn.microsoft.com/en-us/training/browse/?expanded=azure&products=azure-functions)
- [Create serverless applications path](https://learn.microsoft.com/en-us/training/paths/create-serverless-applications/)